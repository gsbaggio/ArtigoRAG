#include <vector>
#include <set>
#include <algorithm>
#include <climits>

using namespace std;

class Solution {
public:
    int maxScore(vector<int>& nums1, vector<int>& nums2, int k) {
        int n = nums1.size();
        int maxScore = INT_MIN;

        for (int i = 0; i <= k; i++) {
            if (i > nums1.size() || k - i > nums2.size()) {
                continue;
            }

            vector<int> sub1(nums1.begin(), nums1.begin() + i);
            vector<int> sub2(nums2.begin(), nums2.begin() + k - i);

            sort(sub1.begin(), sub1.end());
            sort(sub2.begin(), sub2.end(), greater<int>());

            int score = 0;
            for (int j = 0; j < sub1.size(); j++) {
                score += sub1[j] * min(sub2[j], sub2[sub2.size() - sub1.size() + j]);
            }

            maxScore = max(maxScore, score);
        }

        return maxScore;
    }
};