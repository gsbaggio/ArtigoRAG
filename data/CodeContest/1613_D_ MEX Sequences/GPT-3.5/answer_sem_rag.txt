MOD = 998244353

def mex_correct_subsequences(t, test_cases):
    for n, a in test_cases:
        dp = [0] * (n + 2)
        last = [-1] * (n + 2)
        pref = [0] * (n + 2)
        dp[0] = 1

        for i in range(1, n + 1):
            dp[i] = (pref[i - 1] - pref[last[a[i - 1]] - 1]) % MOD
            if dp[i] < 0:
                dp[i] += MOD
            last[a[i - 1]] = i
            pref[i] = (pref[i - 1] + dp[i]) % MOD

        result = sum(dp) % MOD
        print(result)

# Input reading
t = int(input())
test_cases = []
for _ in range(t):
    n = int(input())
    a = list(map(int, input().split()))
    test_cases.append((n, a))

mex_correct_subsequences(t, test_cases)