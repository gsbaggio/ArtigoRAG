def solve():
    n, q = map(int, input().split())
    p = list(map(int, input().split()))

    def query1(x, y):
        p[x - 1], p[y - 1] = p[y - 1], p[x - 1]

    def query2(i, k):
        current = i
        for _ in range(k):
            current = p[current - 1]
        return current

    for _ in range(q):
        query = list(map(int, input().split()))
        if query[0] == 1:
            query1(query[1], query[2])
        else:
            print(query2(query[1], query[2]))

solve()