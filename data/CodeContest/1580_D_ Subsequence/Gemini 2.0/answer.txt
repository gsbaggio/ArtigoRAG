def solve():
    n, m = map(int, input().split())
    a = list(map(int, input().split()))
    
    max_value = float('-inf')
    
    for i in range(1 << n):
        subsequence_indices = []
        subsequence = []
        for j in range(n):
            if (i >> j) & 1:
                subsequence_indices.append(j)
                subsequence.append(a[j])
        
        if len(subsequence) != m:
            continue
        
        value = 0
        
        # Calculate the first term
        sum_subsequence = sum(subsequence)
        value += m * sum_subsequence
        
        # Calculate the second term
        for k in range(m):
            for l in range(m):
                start = min(subsequence_indices[k], subsequence_indices[l])
                end = max(subsequence_indices[k], subsequence_indices[l])
                
                min_val = float('inf')
                for p in range(start, end + 1):
                    min_val = min(min_val, a[p])
                value -= min_val
        
        max_value = max(max_value, value)
    
    print(max(0, max_value))

solve()